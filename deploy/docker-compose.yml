version: "3"

services:
  gpt:
    image: ghcr.io/boriselec/chatgpt-web:fork
    container_name: gpt
    logging:
      driver: local
      options:
        max-file: "20"
    environment:
      - OPENAPI_KEY=${OPENAPI_KEY}
      - API_BASE=https://api.openai.com
  auth:
    image: beevelop/nginx-basic-auth
    container_name: auth
    ports:
      - '80:80'
    environment:
      - PORT=80
      - FORWARD_HOST=gpt
      - FORWARD_PORT=80
      ## escape $ with $$ in Docker yml due to variable expansion
      ## example user/pass generated with htpasswd is foo:bar
      - HTPASSWD=${HTPASSWD}
